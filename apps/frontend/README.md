# connect

## バックエンドとの通信方式について
3案あったが結局connectを採用した。<br>
案:(オススメ順)
1. **connect**
    - 最も実装量も少ないしインフラもシンプル。普通のクライアントサーバーとバックエンドサーバーで通信するだけ。
    - HTTP/1.1での通信になる。
2. **APIルート経由**
    - Next.jsのAPIルートを経由してバックエンドと通信する。
    - つまり、クライアントからRESTでAPIルートにリクエストし、APIルートからバックエンドにgRPC通信する。
    - APIルートへはHTTP/1.1, バックエンドサーバーにはHTTP/2での通信になる。
3. **Proxy(envoy)経由**
    - envoyを使ってgRPC-webをRESTに変換してバックエンドと通信する。
    - ローカルだとenvoyの設定が必要になるし本番でもproxyサーバーが必要になる。
    - APIルートの時と同じくHTTP/1.1, HTTP/2 の2通信が発生する上にサーバー間通信も発生する。
      - 理論上最も通信が遅くなる。
